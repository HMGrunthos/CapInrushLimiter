Version 4
SHEET 1 2944 968
WIRE -928 -544 -992 -544
WIRE -992 -528 -992 -544
WIRE -880 -528 -880 -608
WIRE -928 -512 -928 -544
WIRE -992 -432 -992 -448
WIRE -960 -432 -992 -432
WIRE -928 -432 -928 -464
WIRE -928 -432 -960 -432
WIRE -960 -400 -960 -432
WIRE -880 -368 -880 -448
WIRE -1536 -256 -1536 -288
WIRE -1520 -256 -1536 -256
WIRE -1456 -256 -1456 -288
WIRE -1456 -256 -1520 -256
WIRE -528 -240 -528 -304
WIRE -528 -240 -848 -240
WIRE -320 -240 -528 -240
WIRE -224 -240 -320 -240
WIRE -528 -224 -528 -240
WIRE -1520 -192 -1520 -256
WIRE -1472 -192 -1520 -192
WIRE -1344 -192 -1344 -256
WIRE -1344 -192 -1392 -192
WIRE -1280 -192 -1344 -192
WIRE -1168 -192 -1216 -192
WIRE -1088 -192 -1088 -208
WIRE -1088 -192 -1168 -192
WIRE -1008 -192 -1088 -192
WIRE -976 -192 -1008 -192
WIRE -848 -192 -848 -240
WIRE -848 -192 -880 -192
WIRE -1792 -176 -1872 -176
WIRE -1664 -176 -1728 -176
WIRE -1008 -144 -1008 -192
WIRE -624 -144 -640 -144
WIRE -528 -144 -528 -160
WIRE -528 -144 -560 -144
WIRE -480 -144 -528 -144
WIRE -2112 -96 -2176 -96
WIRE -1872 -96 -1872 -176
WIRE -1872 -96 -2032 -96
WIRE -1792 -96 -1872 -96
WIRE -1664 -96 -1664 -176
WIRE -1664 -96 -1728 -96
WIRE -1520 -96 -1520 -192
WIRE -1520 -96 -1664 -96
WIRE -528 -96 -528 -144
WIRE -960 -80 -960 -144
WIRE -640 -80 -640 -144
WIRE -640 -80 -960 -80
WIRE -576 -80 -640 -80
WIRE -2176 -32 -2176 -96
WIRE -1872 -32 -1872 -96
WIRE -1792 -32 -1872 -32
WIRE -1632 -32 -1728 -32
WIRE 176 -32 64 -32
WIRE -1520 -16 -1520 -96
WIRE -128 -16 -368 -16
WIRE 64 -16 64 -32
WIRE 64 -16 -128 -16
WIRE -1296 0 -1344 0
WIRE -1168 0 -1168 -192
WIRE -1168 0 -1216 0
WIRE -1120 0 -1168 0
WIRE -1008 0 -1008 -64
WIRE -1008 0 -1056 0
WIRE -960 0 -960 -80
WIRE -960 0 -1008 0
WIRE -912 0 -960 0
WIRE -368 0 -368 -16
WIRE -368 0 -528 0
WIRE -320 0 -320 -240
WIRE -224 0 -224 -240
WIRE 176 0 176 -32
WIRE -128 16 -128 -16
WIRE -1792 32 -1840 32
WIRE -1664 32 -1664 -96
WIRE -1664 32 -1728 32
WIRE 176 64 64 64
WIRE -608 80 -1152 80
WIRE -2176 96 -2176 48
WIRE -2112 96 -2176 96
WIRE -1840 96 -1840 32
WIRE -1840 96 -2032 96
WIRE -1792 96 -1840 96
WIRE -1632 96 -1632 -32
WIRE -1632 96 -1728 96
WIRE -1520 96 -1520 48
WIRE -1520 96 -1632 96
WIRE -1152 96 -1152 80
WIRE -128 112 -128 96
WIRE -96 112 -128 112
WIRE -16 112 -32 112
WIRE 0 112 -16 112
WIRE -1008 144 -1008 0
WIRE -16 144 -16 112
WIRE 16 144 -16 144
WIRE -128 160 -128 112
WIRE -16 160 -16 144
WIRE 16 160 16 144
WIRE 64 176 64 160
WIRE 160 176 64 176
WIRE -2112 192 -2176 192
WIRE -1872 192 -2032 192
WIRE -1792 192 -1872 192
WIRE -1664 192 -1728 192
WIRE -1520 192 -1520 96
WIRE -1520 192 -1664 192
WIRE -1344 192 -1344 0
WIRE -1280 192 -1344 192
WIRE -1152 192 -1152 160
WIRE -1152 192 -1200 192
WIRE -1072 192 -1152 192
WIRE -1344 240 -1344 192
WIRE -2176 256 -2176 192
WIRE -1872 256 -1872 192
WIRE -1792 256 -1872 256
WIRE -1632 256 -1728 256
WIRE -1152 256 -1152 192
WIRE -1520 272 -1520 192
WIRE -1008 272 -1008 240
WIRE -960 272 -1008 272
WIRE -848 272 -848 -192
WIRE -848 272 -896 272
WIRE -128 272 -128 224
WIRE -16 272 -16 224
WIRE -16 272 -128 272
WIRE 16 272 16 224
WIRE 16 272 -16 272
WIRE 64 272 64 256
WIRE 64 272 16 272
WIRE -1008 288 -1008 272
WIRE -1792 320 -1840 320
WIRE -1664 320 -1664 192
WIRE -1664 320 -1728 320
WIRE -608 320 -608 80
WIRE 160 320 160 176
WIRE 160 320 -608 320
WIRE -2176 384 -2176 336
WIRE -2112 384 -2176 384
WIRE -1840 384 -1840 320
WIRE -1840 384 -2032 384
WIRE -1792 384 -1840 384
WIRE -1632 384 -1632 256
WIRE -1632 384 -1728 384
WIRE -1520 384 -1520 336
WIRE -1520 384 -1632 384
WIRE -1344 384 -1344 320
WIRE -1344 384 -1520 384
WIRE -1152 384 -1152 320
WIRE -1152 384 -1344 384
WIRE -1008 384 -1008 368
WIRE -1008 384 -1152 384
WIRE -320 384 -320 64
WIRE -320 384 -1008 384
WIRE -224 384 -224 80
WIRE -224 384 -320 384
WIRE 64 384 64 272
WIRE 64 384 -224 384
WIRE -1520 416 -1520 384
FLAG -1520 416 0
FLAG -880 -608 T
FLAG -880 -368 S
FLAG -1344 -256 T
FLAG -528 -304 S
FLAG 176 -32 RCA
FLAG 176 64 RCB
FLAG -960 -400 0
FLAG -912 0 Vg
FLAG -1088 -208 Vs1
FLAG -480 -144 Vs2
SYMBOL voltage -2176 -48 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value SINE(0 37.7736 50 0 0 0 2000)
SYMBOL schottky -1792 -80 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D4
SYMATTR Value RB238NS150
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL schottky -1728 80 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D6
SYMATTR Value RB238NS150
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL schottky -1792 48 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D7
SYMATTR Value RB238NS150
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL schottky -1728 -48 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D8
SYMATTR Value RB238NS150
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL res -2016 -112 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 0.0855
SYMBOL schottky -1792 208 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D9
SYMATTR Value RB238NS150
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL schottky -1728 368 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D10
SYMATTR Value RB238NS150
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL schottky -1792 336 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D11
SYMATTR Value RB238NS150
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL schottky -1728 240 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D12
SYMATTR Value RB238NS150
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL res -2016 80 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 0.0855
SYMBOL voltage -2176 240 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value SINE(0 37.7736 50 0 0 0 2000)
SYMBOL res -2016 176 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 0.0855
SYMBOL res -2016 368 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 0.0855
SYMBOL cap -1728 -192 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C6
SYMATTR Value 100nF
SYMATTR SpiceLine V=60
SYMBOL cap -1536 272 R0
SYMATTR InstName C2
SYMATTR Value 13200µF
SYMATTR SpiceLine V=50 Rser=0.03
SYMBOL cap -1536 -16 R0
SYMATTR InstName C3
SYMATTR Value 13200µF
SYMATTR SpiceLine V=50 Rser=0.03
SYMBOL pmos -880 -144 M270
SYMATTR InstName M1
SYMATTR Value irf9540npbf
SYMATTR Prefix X
SYMBOL cap -336 0 R0
WINDOW 0 28 55 Left 2
WINDOW 3 -88 56 Left 2
SYMATTR InstName C10
SYMATTR Value 16200µF
SYMATTR SpiceLine V=80 Rser=0.016
SYMBOL res -1360 224 R0
SYMATTR InstName R8
SYMATTR Value 2.2e3
SYMBOL pmos -576 0 M180
SYMATTR InstName M4
SYMATTR Value BSP230
SYMATTR Prefix X
SYMBOL zener -1056 -16 R90
WINDOW 0 -4 32 VBottom 2
WINDOW 3 36 32 VTop 2
SYMATTR InstName D13
SYMATTR Value BZX84C15L
SYMBOL res -1200 -16 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value 100e3
SYMBOL cap -1168 256 R0
WINDOW 0 25 55 Left 2
WINDOW 3 25 5 Left 2
SYMATTR InstName C11
SYMATTR Value 220e-9
SYMBOL npn -1072 144 R0
SYMATTR InstName Q2
SYMATTR Value KST42
SYMBOL res -992 384 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R15
SYMATTR Value 1e3
SYMBOL res -992 -48 R180
WINDOW 0 29 8 Left 2
WINDOW 3 30 47 Left 2
SYMATTR InstName R17
SYMATTR Value 100e3
SYMBOL cap -896 256 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C12
SYMATTR Value 10e-6
SYMBOL diode 160 64 M180
WINDOW 0 -32 3 Left 2
WINDOW 3 -72 60 Left 2
SYMATTR InstName D19
SYMATTR Value 1N4001
SYMBOL res -1440 -304 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 54 VTop 2
SYMATTR InstName R20
SYMATTR Value R=if((time<0.1)|((time > 2)&(time<3.5)),1e9,1e-6)
SYMBOL diode -1280 -176 R270
WINDOW 0 -32 32 VTop 2
WINDOW 3 63 34 VBottom 2
SYMATTR InstName D1
SYMATTR Value UF5406
SYMBOL sw -880 -432 M180
WINDOW 3 12 101 Left 2
SYMATTR Value Relay
SYMATTR InstName S1
SYMBOL bv -992 -544 R0
WINDOW 0 -22 -13 VRight 2
WINDOW 3 -54 -32 VRight 2
SYMATTR InstName B1
SYMATTR Value V=V(RCA,RCB)
SYMBOL res -1184 176 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 100e3
SYMBOL zener -624 -128 R270
WINDOW 0 36 32 VTop 2
WINDOW 3 -4 32 VBottom 2
SYMATTR InstName D2
SYMATTR Value BZX84C15L
SYMBOL diode -544 -224 R0
WINDOW 3 40 36 Left 2
SYMATTR Value BAS16H
SYMATTR InstName D5
SYMBOL npn 0 64 R0
SYMATTR InstName Q3
SYMATTR Value KST42
SYMBOL ind 48 -32 R0
SYMATTR InstName L2
SYMATTR Value 1e-6
SYMATTR SpiceLine Rser=5760
SYMBOL res -144 0 R0
SYMATTR InstName R16
SYMATTR Value 100e3
SYMBOL res 48 160 R0
SYMATTR InstName R18
SYMATTR Value 550
SYMBOL cap -144 160 R0
SYMATTR InstName C7
SYMATTR Value 10e-6
SYMBOL zener 0 224 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D21
SYMATTR Value NZX5V6C
SYMATTR Prefix X
SYMBOL zener -32 96 R90
WINDOW 0 -4 32 VBottom 2
WINDOW 3 36 32 VTop 2
SYMATTR InstName D22
SYMATTR Value BZX84C15L
SYMBOL cap 0 160 R0
WINDOW 0 25 55 Left 2
WINDOW 3 25 5 Left 2
SYMATTR InstName C1
SYMATTR Value 100e-9
SYMBOL res -1376 -208 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 54 VTop 2
SYMATTR InstName R1
SYMATTR Value R=if(time<0.1,1e9,1e-6)
SYMBOL current -224 0 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName I1
SYMATTR Value PWL(0 0 1.5 0 5 7)
SYMBOL diode -1168 96 R0
WINDOW 3 40 36 Left 2
SYMATTR Value BAS16H
SYMATTR InstName D3
TEXT -2176 -184 Left 2 !.tran 5 startup
TEXT -2176 592 Left 2 !.model UF5406 d(is = 1.15563E-005 n = 3.45 rs = 0.0887337 eg = 1.11 xti = 3 cjo = 9.14327E-011 vj = 0.298558 m = 0.347605 fc = 0.5  tt = 1.57227E-007 bv = 660 ibv = 0.3 af = 1 kf = 0)
TEXT -2176 464 Left 2 !.inc Infineon-Spice-File-IRF9540NPBF-SM-v01_00-EN.spi
TEXT -2176 -152 Left 2 !.options cshunt=1e-15
TEXT -2176 624 Left 2 !.inc BAS16H.txt
TEXT -2176 496 Left 2 !.inc BSP230.prm
TEXT -2176 560 Left 2 !.model 1N4001 D(Is=14.11n N=1.984 Rs=33.89m Ikf=94.81 Xti=3 Eg=1.11 Cjo=25.89p M=.44 Vj=.3245 Fc=.5 Bv=75 Ibv=10u Tt=5.7u Iave=1 Vpk=50 mfg=GI type=silicon
TEXT -800 -488 Left 2 !.model Relay SW(Roff=1Meg Ron=1e-3 Vt=34V Vh=2)
TEXT -2176 528 Left 2 !.lib KST42.lib
TEXT -2176 656 Left 2 !.inc NZX5V6C.prm
